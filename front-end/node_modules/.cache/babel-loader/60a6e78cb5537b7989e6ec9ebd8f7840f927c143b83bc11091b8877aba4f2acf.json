{"ast":null,"code":"import axios from \"axios\";\n\n// Base URLs for microservices\nconst PRODUCT_API_URL = \"http://localhost:8810\";\nconst RECOMMENDATION_API_URL = \"http://localhost:8812\";\nconst USER_API_URL = \"http://localhost:8900/api/accounts\";\nconst ORDER_API_URL = \"http://localhost:8813\"; // Order service\n\n// Generic API call function\nexport function callApi(endpoint, method = \"GET\", body = null, baseUrl = PRODUCT_API_URL, headers = {}) {\n  return axios({\n    method,\n    url: `${baseUrl}/${endpoint}`,\n    data: body,\n    headers,\n    withCredentials: true // ✅ Ensures cookies are sent\n  }).catch(e => {\n    console.error(\"API Error:\", e);\n  });\n}\n\n// ✅ Product APIs\nexport function GET_ALL_PRODUCTS() {\n  return callApi(\"products\", \"GET\").then(response => (response === null || response === void 0 ? void 0 : response.data) || []);\n}\n_c = GET_ALL_PRODUCTS;\nexport function GET_PRODUCT_ID(id) {\n  return callApi(`products/${id}`, \"GET\");\n}\n\n// ✅ Category APIs\n_c2 = GET_PRODUCT_ID;\nexport function GET_ALL_CATEGORIES() {\n  return callApi(\"categories\", \"GET\");\n}\n_c3 = GET_ALL_CATEGORIES;\nexport function GET_CATEGORY_ID(id) {\n  return callApi(`categories/${id}`, \"GET\");\n}\n\n// ✅ User APIs\n_c4 = GET_CATEGORY_ID;\nexport function REGISTER_USER(userData) {\n  return callApi(\"users\", \"POST\", userData, USER_API_URL);\n}\n_c5 = REGISTER_USER;\nexport function GET_USER_BY_ID(id) {\n  return callApi(`users/${id}`, \"GET\", null, USER_API_URL);\n}\n_c6 = GET_USER_BY_ID;\nexport function GET_USER_BY_NAME(userName) {\n  return callApi(`users?name=${encodeURIComponent(userName)}`, \"GET\", null, USER_API_URL);\n}\n_c7 = GET_USER_BY_NAME;\nexport function LOGIN_USER(credentials) {\n  return callApi(\"login\", \"POST\", credentials, USER_API_URL);\n}\n\n// ✅ Recommendation APIs\n_c8 = LOGIN_USER;\nexport function GET_RECOMMENDATIONS_BY_PRODUCT(productName) {\n  return callApi(`recommendations?name=${productName}`, \"GET\", null, RECOMMENDATION_API_URL);\n}\n_c9 = GET_RECOMMENDATIONS_BY_PRODUCT;\nexport function POST_ADD_RECOMMENDATION(userId, productId, rating) {\n  return callApi(`${userId}/recommendations/${productId}?rating=${rating}`, \"POST\", null, RECOMMENDATION_API_URL);\n}\n\n// ✅ Cart APIs (Order Service)\n_c10 = POST_ADD_RECOMMENDATION;\nexport function GET_CART(cartId) {\n  return callApi(\"cart\", \"GET\", null, ORDER_API_URL, {\n    Cookie: `cartId=${cartId}` // ✅ Ensure `cartId` is sent in headers\n  });\n}\n_c11 = GET_CART;\nexport function ADD_TO_CART(productId, quantity) {\n  const storedUser = JSON.parse(localStorage.getItem(\"user\"));\n  if (!storedUser) {\n    alert(\"Vui lòng đăng nhập để thêm vào giỏ hàng!\");\n    return null;\n  }\n  const cartId = storedUser.data.id; // Use user ID as `cartId`\n\n  return axios({\n    method: \"POST\",\n    url: `${ORDER_API_URL}/cart?productId=${productId}&quantity=${quantity}`,\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Cookie: `cartId=${cartId}` // ✅ Correctly set the cartId in headers\n    },\n    withCredentials: true\n  }).then(response => response.data).catch(e => {\n    console.error(\"API Error:\", e);\n  });\n}\n_c12 = ADD_TO_CART;\nexport function REMOVE_FROM_CART(productId) {\n  const storedUser = JSON.parse(localStorage.getItem(\"user\"));\n  if (!storedUser) return null;\n  const cartId = storedUser.data.id; // Get cartId from user\n\n  return callApi(`cart?productId=${productId}`, \"DELETE\", null, ORDER_API_URL, {\n    Cookie: `cartId=${cartId}` // ✅ Send `cartId` in headers\n  });\n}\n\n// ✅ Order APIs\n_c13 = REMOVE_FROM_CART;\nexport function PLACE_ORDER() {\n  const storedUser = JSON.parse(localStorage.getItem(\"user\"));\n  if (!storedUser) return null;\n  const userId = storedUser.data.id;\n  const cartId = storedUser.data.id;\n  return callApi(`order/${userId}`, \"POST\", null, ORDER_API_URL, {\n    Cookie: `cartId=${cartId}` // ✅ Include `cartId` in headers\n  });\n}\n_c14 = PLACE_ORDER;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14;\n$RefreshReg$(_c, \"GET_ALL_PRODUCTS\");\n$RefreshReg$(_c2, \"GET_PRODUCT_ID\");\n$RefreshReg$(_c3, \"GET_ALL_CATEGORIES\");\n$RefreshReg$(_c4, \"GET_CATEGORY_ID\");\n$RefreshReg$(_c5, \"REGISTER_USER\");\n$RefreshReg$(_c6, \"GET_USER_BY_ID\");\n$RefreshReg$(_c7, \"GET_USER_BY_NAME\");\n$RefreshReg$(_c8, \"LOGIN_USER\");\n$RefreshReg$(_c9, \"GET_RECOMMENDATIONS_BY_PRODUCT\");\n$RefreshReg$(_c10, \"POST_ADD_RECOMMENDATION\");\n$RefreshReg$(_c11, \"GET_CART\");\n$RefreshReg$(_c12, \"ADD_TO_CART\");\n$RefreshReg$(_c13, \"REMOVE_FROM_CART\");\n$RefreshReg$(_c14, \"PLACE_ORDER\");","map":{"version":3,"names":["axios","PRODUCT_API_URL","RECOMMENDATION_API_URL","USER_API_URL","ORDER_API_URL","callApi","endpoint","method","body","baseUrl","headers","url","data","withCredentials","catch","e","console","error","GET_ALL_PRODUCTS","then","response","_c","GET_PRODUCT_ID","id","_c2","GET_ALL_CATEGORIES","_c3","GET_CATEGORY_ID","_c4","REGISTER_USER","userData","_c5","GET_USER_BY_ID","_c6","GET_USER_BY_NAME","userName","encodeURIComponent","_c7","LOGIN_USER","credentials","_c8","GET_RECOMMENDATIONS_BY_PRODUCT","productName","_c9","POST_ADD_RECOMMENDATION","userId","productId","rating","_c10","GET_CART","cartId","Cookie","_c11","ADD_TO_CART","quantity","storedUser","JSON","parse","localStorage","getItem","alert","_c12","REMOVE_FROM_CART","_c13","PLACE_ORDER","_c14","$RefreshReg$"],"sources":["/Users/nguyentadinhduy/Documents/CAODANGCONGTHUONG/web02/front-end/src/api/apiService.js"],"sourcesContent":["import axios from \"axios\";\n\n// Base URLs for microservices\nconst PRODUCT_API_URL = \"http://localhost:8810\";\nconst RECOMMENDATION_API_URL = \"http://localhost:8812\";\nconst USER_API_URL = \"http://localhost:8900/api/accounts\";\nconst ORDER_API_URL = \"http://localhost:8813\"; // Order service\n\n// Generic API call function\nexport function callApi(\n  endpoint,\n  method = \"GET\",\n  body = null,\n  baseUrl = PRODUCT_API_URL,\n  headers = {}\n) {\n  return axios({\n    method,\n    url: `${baseUrl}/${endpoint}`,\n    data: body,\n    headers,\n    withCredentials: true, // ✅ Ensures cookies are sent\n  }).catch((e) => {\n    console.error(\"API Error:\", e);\n  });\n}\n\n// ✅ Product APIs\nexport function GET_ALL_PRODUCTS() {\n  return callApi(\"products\", \"GET\").then((response) => response?.data || []);\n}\n\nexport function GET_PRODUCT_ID(id) {\n  return callApi(`products/${id}`, \"GET\");\n}\n\n// ✅ Category APIs\nexport function GET_ALL_CATEGORIES() {\n  return callApi(\"categories\", \"GET\");\n}\n\nexport function GET_CATEGORY_ID(id) {\n  return callApi(`categories/${id}`, \"GET\");\n}\n\n// ✅ User APIs\nexport function REGISTER_USER(userData) {\n  return callApi(\"users\", \"POST\", userData, USER_API_URL);\n}\n\nexport function GET_USER_BY_ID(id) {\n  return callApi(`users/${id}`, \"GET\", null, USER_API_URL);\n}\n\nexport function GET_USER_BY_NAME(userName) {\n  return callApi(\n    `users?name=${encodeURIComponent(userName)}`,\n    \"GET\",\n    null,\n    USER_API_URL\n  );\n}\n\nexport function LOGIN_USER(credentials) {\n  return callApi(\"login\", \"POST\", credentials, USER_API_URL);\n}\n\n// ✅ Recommendation APIs\nexport function GET_RECOMMENDATIONS_BY_PRODUCT(productName) {\n  return callApi(\n    `recommendations?name=${productName}`,\n    \"GET\",\n    null,\n    RECOMMENDATION_API_URL\n  );\n}\n\nexport function POST_ADD_RECOMMENDATION(userId, productId, rating) {\n  return callApi(\n    `${userId}/recommendations/${productId}?rating=${rating}`,\n    \"POST\",\n    null,\n    RECOMMENDATION_API_URL\n  );\n}\n\n// ✅ Cart APIs (Order Service)\nexport function GET_CART(cartId) {\n  return callApi(\"cart\", \"GET\", null, ORDER_API_URL, {\n    Cookie: `cartId=${cartId}`, // ✅ Ensure `cartId` is sent in headers\n  });\n}\n\nexport function ADD_TO_CART(productId, quantity) {\n  const storedUser = JSON.parse(localStorage.getItem(\"user\"));\n\n  if (!storedUser) {\n    alert(\"Vui lòng đăng nhập để thêm vào giỏ hàng!\");\n    return null;\n  }\n\n  const cartId = storedUser.data.id; // Use user ID as `cartId`\n\n  return axios({\n    method: \"POST\",\n    url: `${ORDER_API_URL}/cart?productId=${productId}&quantity=${quantity}`,\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Cookie: `cartId=${cartId}`, // ✅ Correctly set the cartId in headers\n    },\n    withCredentials: true,\n  })\n    .then((response) => response.data)\n    .catch((e) => {\n      console.error(\"API Error:\", e);\n    });\n}\n\nexport function REMOVE_FROM_CART(productId) {\n  const storedUser = JSON.parse(localStorage.getItem(\"user\"));\n  if (!storedUser) return null;\n\n  const cartId = storedUser.data.id; // Get cartId from user\n\n  return callApi(`cart?productId=${productId}`, \"DELETE\", null, ORDER_API_URL, {\n    Cookie: `cartId=${cartId}`, // ✅ Send `cartId` in headers\n  });\n}\n\n// ✅ Order APIs\nexport function PLACE_ORDER() {\n  const storedUser = JSON.parse(localStorage.getItem(\"user\"));\n  if (!storedUser) return null;\n\n  const userId = storedUser.data.id;\n  const cartId = storedUser.data.id;\n\n  return callApi(`order/${userId}`, \"POST\", null, ORDER_API_URL, {\n    Cookie: `cartId=${cartId}`, // ✅ Include `cartId` in headers\n  });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}