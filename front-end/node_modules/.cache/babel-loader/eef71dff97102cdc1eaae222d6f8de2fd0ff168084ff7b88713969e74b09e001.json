{"ast":null,"code":"import axios from \"axios\";\n\n// Base URLs matching Spring Boot microservices\nconst PRODUCT_API_URL = \"http://localhost:8810\";\nconst RECOMMENDATION_API_URL = \"http://localhost:8812\";\nconst USER_API_URL = \"http://localhost:8900/api/accounts\"; // Ensure correct API base URL\nconst ORDER_API_URL = \"http://localhost:8813\"; // Change this based on your backend port\n\n// Generic API call function\nexport function callApi(endpoint, method = \"GET\", body = null, baseUrl = PRODUCT_API_URL) {\n  return axios({\n    method,\n    url: `${baseUrl}/${endpoint}`,\n    data: body\n  }).catch(e => {\n    console.error(\"API Error:\", e);\n  });\n}\n\n// Product APIs (Product Catalog Service - Port 8810)\nexport function GET_ALL_PRODUCTS() {\n  return callApi(\"products\", \"GET\").then(response => {\n    console.log(\"cmm\", response);\n    if (response && response.data) {\n      return response.data; // Ensure only data is returned\n    }\n    return [];\n  });\n}\n_c = GET_ALL_PRODUCTS;\nexport function GET_PRODUCT_ID(id) {\n  return callApi(`products/${id}`, \"GET\");\n}\n_c2 = GET_PRODUCT_ID;\nexport function POST_ADD_PRODUCT(data) {\n  return callApi(\"admin/products\", \"POST\", data);\n}\n_c3 = POST_ADD_PRODUCT;\nexport function PUT_EDIT_PRODUCT(data) {\n  return callApi(\"admin/products\", \"PUT\", data);\n}\n_c4 = PUT_EDIT_PRODUCT;\nexport function DELETE_PRODUCT_ID(id) {\n  return callApi(`admin/products/${id}`, \"DELETE\");\n}\n\n// Category APIs\n_c5 = DELETE_PRODUCT_ID;\nexport function GET_ALL_CATEGORIES() {\n  return callApi(\"categories\", \"GET\");\n}\n_c6 = GET_ALL_CATEGORIES;\nexport function GET_CATEGORY_ID(id) {\n  return callApi(`categories/${id}`, \"GET\");\n}\n\n// User APIs\n_c7 = GET_CATEGORY_ID;\nexport function REGISTER_USER(userData) {\n  return callApi(\"users\", \"POST\", userData, USER_API_URL);\n}\n_c8 = REGISTER_USER;\nexport function GET_USER_BY_ID(id) {\n  return callApi(`users/${id}`, \"GET\", null, USER_API_URL);\n}\n_c9 = GET_USER_BY_ID;\nexport function GET_USER_BY_NAME(userName) {\n  return callApi(`users?name=${encodeURIComponent(userName)}`, \"GET\", null, USER_API_URL);\n}\n_c10 = GET_USER_BY_NAME;\nexport function LOGIN_USER(credentials) {\n  return callApi(\"login\", \"POST\", credentials, USER_API_URL);\n}\n_c11 = LOGIN_USER;\nexport function GET_PRODUCTS_BY_CATEGORY(categoryId) {\n  return callApi(`products?category=${categoryId}`, \"GET\");\n}\n\n// Recommendation APIs (Recommendation Service - Port 8812)\n_c12 = GET_PRODUCTS_BY_CATEGORY;\nexport function GET_RECOMMENDATIONS_BY_PRODUCT(productName) {\n  return callApi(`recommendations?name=${productName}`, \"GET\", null, RECOMMENDATION_API_URL);\n}\n_c13 = GET_RECOMMENDATIONS_BY_PRODUCT;\nexport function POST_ADD_RECOMMENDATION(userId, productId, rating) {\n  return callApi(`${userId}/recommendations/${productId}?rating=${rating}`, \"POST\", null, RECOMMENDATION_API_URL);\n}\n_c14 = POST_ADD_RECOMMENDATION;\nexport function DELETE_RECOMMENDATION(id) {\n  return callApi(`recommendations/${id}`, \"DELETE\", null, RECOMMENDATION_API_URL);\n}\n_c15 = DELETE_RECOMMENDATION;\nexport function GET_CART(cartId) {\n  return callApi(\"cart\", \"GET\", null, ORDER_API_URL);\n}\n_c16 = GET_CART;\nexport function ADD_TO_CART(productId, quantity, navigate) {\n  const user = localStorage.getItem(\"user\");\n  if (!user) {\n    alert(\"Vui lòng đăng nhập để thêm vào giỏ hàng!\");\n    navigate(\"/login\"); // ✅ Redirect to login if user is not logged in\n    return;\n  }\n  return axios({\n    method: \"POST\",\n    url: `http://localhost:8813/cart?productId=${productId}&quantity=${quantity}`,\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Cookie: user.id\n    },\n    withCredentials: true\n  }).then(response => response.data).catch(e => {\n    console.error(\"API Error:\", e);\n  });\n}\n_c17 = ADD_TO_CART;\nexport function REMOVE_FROM_CART(productId, cartId) {\n  return callApi(`cart?productId=${productId}`, \"DELETE\", null, ORDER_API_URL);\n}\n\n// ✅ Order APIs (Order Service)\n_c18 = REMOVE_FROM_CART;\nexport function PLACE_ORDER(userId, cartId) {\n  return callApi(`order/${userId}`, \"POST\", null, ORDER_API_URL);\n}\n_c19 = PLACE_ORDER;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19;\n$RefreshReg$(_c, \"GET_ALL_PRODUCTS\");\n$RefreshReg$(_c2, \"GET_PRODUCT_ID\");\n$RefreshReg$(_c3, \"POST_ADD_PRODUCT\");\n$RefreshReg$(_c4, \"PUT_EDIT_PRODUCT\");\n$RefreshReg$(_c5, \"DELETE_PRODUCT_ID\");\n$RefreshReg$(_c6, \"GET_ALL_CATEGORIES\");\n$RefreshReg$(_c7, \"GET_CATEGORY_ID\");\n$RefreshReg$(_c8, \"REGISTER_USER\");\n$RefreshReg$(_c9, \"GET_USER_BY_ID\");\n$RefreshReg$(_c10, \"GET_USER_BY_NAME\");\n$RefreshReg$(_c11, \"LOGIN_USER\");\n$RefreshReg$(_c12, \"GET_PRODUCTS_BY_CATEGORY\");\n$RefreshReg$(_c13, \"GET_RECOMMENDATIONS_BY_PRODUCT\");\n$RefreshReg$(_c14, \"POST_ADD_RECOMMENDATION\");\n$RefreshReg$(_c15, \"DELETE_RECOMMENDATION\");\n$RefreshReg$(_c16, \"GET_CART\");\n$RefreshReg$(_c17, \"ADD_TO_CART\");\n$RefreshReg$(_c18, \"REMOVE_FROM_CART\");\n$RefreshReg$(_c19, \"PLACE_ORDER\");","map":{"version":3,"names":["axios","PRODUCT_API_URL","RECOMMENDATION_API_URL","USER_API_URL","ORDER_API_URL","callApi","endpoint","method","body","baseUrl","url","data","catch","e","console","error","GET_ALL_PRODUCTS","then","response","log","_c","GET_PRODUCT_ID","id","_c2","POST_ADD_PRODUCT","_c3","PUT_EDIT_PRODUCT","_c4","DELETE_PRODUCT_ID","_c5","GET_ALL_CATEGORIES","_c6","GET_CATEGORY_ID","_c7","REGISTER_USER","userData","_c8","GET_USER_BY_ID","_c9","GET_USER_BY_NAME","userName","encodeURIComponent","_c10","LOGIN_USER","credentials","_c11","GET_PRODUCTS_BY_CATEGORY","categoryId","_c12","GET_RECOMMENDATIONS_BY_PRODUCT","productName","_c13","POST_ADD_RECOMMENDATION","userId","productId","rating","_c14","DELETE_RECOMMENDATION","_c15","GET_CART","cartId","_c16","ADD_TO_CART","quantity","navigate","user","localStorage","getItem","alert","headers","Cookie","withCredentials","_c17","REMOVE_FROM_CART","_c18","PLACE_ORDER","_c19","$RefreshReg$"],"sources":["/Users/nguyentadinhduy/Documents/CAODANGCONGTHUONG/web02/front-end/src/api/apiService.js"],"sourcesContent":["import axios from \"axios\";\n\n// Base URLs matching Spring Boot microservices\nconst PRODUCT_API_URL = \"http://localhost:8810\";\nconst RECOMMENDATION_API_URL = \"http://localhost:8812\";\nconst USER_API_URL = \"http://localhost:8900/api/accounts\"; // Ensure correct API base URL\nconst ORDER_API_URL = \"http://localhost:8813\"; // Change this based on your backend port\n\n// Generic API call function\nexport function callApi(\n  endpoint,\n  method = \"GET\",\n  body = null,\n  baseUrl = PRODUCT_API_URL\n) {\n  return axios({\n    method,\n    url: `${baseUrl}/${endpoint}`,\n    data: body,\n  }).catch((e) => {\n    console.error(\"API Error:\", e);\n  });\n}\n\n// Product APIs (Product Catalog Service - Port 8810)\nexport function GET_ALL_PRODUCTS() {\n  return callApi(\"products\", \"GET\").then((response) => {\n    console.log(\"cmm\", response);\n    if (response && response.data) {\n      return response.data; // Ensure only data is returned\n    }\n    return [];\n  });\n}\n\nexport function GET_PRODUCT_ID(id) {\n  return callApi(`products/${id}`, \"GET\");\n}\n\nexport function POST_ADD_PRODUCT(data) {\n  return callApi(\"admin/products\", \"POST\", data);\n}\n\nexport function PUT_EDIT_PRODUCT(data) {\n  return callApi(\"admin/products\", \"PUT\", data);\n}\n\nexport function DELETE_PRODUCT_ID(id) {\n  return callApi(`admin/products/${id}`, \"DELETE\");\n}\n\n// Category APIs\nexport function GET_ALL_CATEGORIES() {\n  return callApi(\"categories\", \"GET\");\n}\n\nexport function GET_CATEGORY_ID(id) {\n  return callApi(`categories/${id}`, \"GET\");\n}\n\n// User APIs\nexport function REGISTER_USER(userData) {\n  return callApi(\"users\", \"POST\", userData, USER_API_URL);\n}\n\nexport function GET_USER_BY_ID(id) {\n  return callApi(`users/${id}`, \"GET\", null, USER_API_URL);\n}\n\nexport function GET_USER_BY_NAME(userName) {\n  return callApi(\n    `users?name=${encodeURIComponent(userName)}`,\n    \"GET\",\n    null,\n    USER_API_URL\n  );\n}\n\nexport function LOGIN_USER(credentials) {\n  return callApi(\"login\", \"POST\", credentials, USER_API_URL);\n}\n\nexport function GET_PRODUCTS_BY_CATEGORY(categoryId) {\n  return callApi(`products?category=${categoryId}`, \"GET\");\n}\n\n// Recommendation APIs (Recommendation Service - Port 8812)\nexport function GET_RECOMMENDATIONS_BY_PRODUCT(productName) {\n  return callApi(\n    `recommendations?name=${productName}`,\n    \"GET\",\n    null,\n    RECOMMENDATION_API_URL\n  );\n}\n\nexport function POST_ADD_RECOMMENDATION(userId, productId, rating) {\n  return callApi(\n    `${userId}/recommendations/${productId}?rating=${rating}`,\n    \"POST\",\n    null,\n    RECOMMENDATION_API_URL\n  );\n}\n\nexport function DELETE_RECOMMENDATION(id) {\n  return callApi(\n    `recommendations/${id}`,\n    \"DELETE\",\n    null,\n    RECOMMENDATION_API_URL\n  );\n}\nexport function GET_CART(cartId) {\n  return callApi(\"cart\", \"GET\", null, ORDER_API_URL);\n}\n\nexport function ADD_TO_CART(productId, quantity, navigate) {\n  const user = localStorage.getItem(\"user\");\n\n  if (!user) {\n    alert(\"Vui lòng đăng nhập để thêm vào giỏ hàng!\");\n    navigate(\"/login\"); // ✅ Redirect to login if user is not logged in\n    return;\n  }\n\n  return axios({\n    method: \"POST\",\n    url: `http://localhost:8813/cart?productId=${productId}&quantity=${quantity}`,\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Cookie: user.id,\n    },\n    withCredentials: true,\n  })\n    .then((response) => response.data)\n    .catch((e) => {\n      console.error(\"API Error:\", e);\n    });\n}\n\nexport function REMOVE_FROM_CART(productId, cartId) {\n  return callApi(`cart?productId=${productId}`, \"DELETE\", null, ORDER_API_URL);\n}\n\n// ✅ Order APIs (Order Service)\nexport function PLACE_ORDER(userId, cartId) {\n  return callApi(`order/${userId}`, \"POST\", null, ORDER_API_URL);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}